<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Local Transcriber</title>
  <style>
    body { font-family: sans-serif; max-width: 500px; margin: 50px auto; text-align: center; }
    input, select, button { margin: 10px 0; padding: 10px; width: 100%; }
  </style>
</head>
<body>
  <h2>Upload Audio for Transcription</h2>
  <form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="audio" accept="audio/*" required><br>
    <select name="model" required>
      <option value="tiny">Tiny (fastest)</option>
      <option value="small">Small</option>
      <option value="medium">Medium</option>
      <option value="large">Large</option>
    </select><br>
    <button type="submit">Upload & Transcribe</button>
  </form>

  <p id="status"></p>

  <script>
    document.getElementById("uploadForm").onsubmit = async function(e) {
      e.preventDefault();
      const form = new FormData(this);
      document.getElementById("status").innerText = "Processing…";
      try {
        const res = await fetch("/transcribe", { method: "POST", body: form });
        const json = await res.json();
        if (json.url) {
          document.getElementById("status").innerHTML =
            `✅ Transcript ready: <a href="${json.url}" target="_blank">${json.url}</a>`;
        } else {
          throw new Error(JSON.stringify(json));
        }
      } catch (err) {
        document.getElementById("status").innerText = "Error: " + err;
      }
    };
  </script>
</body>
</html>
