<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Video Background, Dropdown & Drag</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      overflow: hidden;
      font-family: sans-serif;
      position: relative;
    }

    /* Background video */
    #bgVideo {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -1;
    }

    /* Toggle button */
    #toggleBtn {
      position: absolute;
      top: 40px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 22px;
      font-size: 16px;
      cursor: pointer;
      z-index: 50;
    }

    /* Dropdown video container */
    #dropVideoContainer {
      position: absolute;
      top: calc(40px + 44px);
      left: 50%;
      transform: translateX(-50%);
      height: 0;
      overflow: hidden;
      transition: height 0.5s ease;
      z-index: 10;
    }

    #dropVideoContainer video {
      width: 300px;
      display: block;
      margin: 0 auto;
    }

    /* Draggable video */
    #draggableVid {
      width: 300px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      touch-action: none;
      cursor: grab;
      user-select: none;
      z-index: 20;
    }
  </style>
</head>
<body>

  <!-- Background video -->
  <video id="bgVideo" src="post1.mov" autoplay loop muted playsinline></video>

  <!-- Toggle button -->
  <button id="toggleBtn">Toggle Dropdown</button>

  <!-- Dropdown video -->
  <div id="dropVideoContainer">
    <video src="post1.mov" autoplay loop muted playsinline></video>
  </div>

  <!-- Draggable video -->
  <video id="draggableVid" src="post1.mov" autoplay loop muted playsinline></video>

  <script>
    // Dropdown toggle logic
    const btn = document.getElementById('toggleBtn');
    const drop = document.getElementById('dropVideoContainer');
    let open = false;

    btn.addEventListener('click', () => {
      const vid = drop.querySelector('video');
      if (open) {
        drop.style.height = '0px';
      } else {
        drop.style.height = vid.offsetHeight + 'px';
      }
      open = !open;
    });

    // Draggable video logic
    const vid = document.getElementById('draggableVid');
    let dragging = false, offX = 0, offY = 0;

    const getXY = e => e.touches ? { x: e.touches[0].clientX, y: e.touches[0].clientY } : { x: e.clientX, y: e.clientY };

    function start(e) {
      e.preventDefault();
      dragging = true;
      vid.style.cursor = 'grabbing';

      if (!vid.dataset.fixed) {
        const r = vid.getBoundingClientRect();
        vid.style.transform = 'none';
        vid.style.left = r.left + 'px';
        vid.style.top = r.top + 'px';
        vid.dataset.fixed = 'true';
      }

      const r = vid.getBoundingClientRect();
      const { x, y } = getXY(e);
      offX = x - r.left;
      offY = y - r.top;
    }

    function move(e) {
      if (!dragging) return;
      e.preventDefault();
      const { x, y } = getXY(e);
      vid.style.left = (x - offX) + 'px';
      vid.style.top = (y - offY) + 'px';
    }

    function end() {
      dragging = false;
      vid.style.cursor = 'grab';
    }

    // Mouse events
    vid.addEventListener('mousedown', start);
    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', end);

    // Touch events
    vid.addEventListener('touchstart', start, { passive: false });
    document.addEventListener('touchmove', move, { passive: false });
    document.addEventListener('touchend', end);
    document.addEventListener('touchcancel', end);
  </script>

</body>
</html>
